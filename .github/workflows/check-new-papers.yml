name: arXiv â†’ Discord (daily)

on:
  schedule:
    - cron: "0 8 * * *"   # 08:00 UTC = 05:00 BRT (UTC-3)
  workflow_dispatch:
    inputs:
      time_frame:
        description: "Time frame (default: 1)"
        required: false
        default: "1"
        type: string

jobs:
  run-scripts:
    runs-on: ubuntu-latest
    steps:
      - name: Install deps
        run: |
          python -m pip install --upgrade pip
          pip install feedparser requests pyyaml

      - name: Run HEP/QGP topics via runner
        env:
          TIME_FRAME: ${{ github.event.inputs.time_frame || '1' }}
          MODE: ${{ github.event.inputs.mode || 'auto' }}

          DISCORD_WEBHOOK_URL_HEPPH: ${{ secrets.HEP_PH_HOOK }}
          DISCORD_WEBHOOK_URL_QGP_BARYOGENESIS: ${{ secrets.HEP_QGP_BARYOGENESIS_HOOK }}
          DISCORD_WEBHOOK_URL_QGP_LFI: ${{ secrets.HEP_QGP_LFI_HOOK }}
          DISCORD_WEBHOOK_URL_QGP_ML: ${{ secrets.HEP_QGP_ML_HOOK }}
          DISCORD_WEBHOOK_URL_QGP_NN: ${{ secrets.HEP_QGP_NEURAL_HOOK }}
          DISCORD_WEBHOOK_URL_BAYESIAN_QGP: ${{ secrets.HEP_QGP_BAYESIAN_INFERENCE_HOOK }}
          DISCORD_WEBHOOK_URL_QGP_DKL: ${{ secrets.HEP_QGP_DEEP_KERNEL_LEARNING }}
        run: python runner.py topics/hep.yml